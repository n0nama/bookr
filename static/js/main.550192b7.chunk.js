(window.webpackJsonptwco_books=window.webpackJsonptwco_books||[]).push([[0],{334:function(e){e.exports=JSON.parse('[{"id":1,"title":"Unlocking Android","isbn":"1933988673","publisher":"Manning Publications","pageCount":416,"yearPublish":2009,"publishedDate":"01.04.2009","thumbnailUrl":"http://t3.gstatic.com/images?q=tbn:ANd9GcT57Kq-zxJqt-IU2F2rvAezQa9yNTV0b1-4LrosEnsgXmHGpXBB","authors":["W. Frank Ableson","Charlie Collins","Robi Sen"]},{"id":2,"title":"Android in Action, Second Edition","isbn":"1935182722","publisher":"Manning Publications","pageCount":592,"yearPublish":2011,"publishedDate":"14.01.2011","thumbnailUrl":"https://images-na.ssl-images-amazon.com/images/I/51JLqhpbneL._SX397_BO1,204,203,200_.jpg","authors":["W. Frank Ableson","Robi Sen"]},{"id":3,"title":"Specification by Example","isbn":"1617290084","publisher":"Manning Publications","pageCount":427,"yearPublish":2011,"publishedDate":"03.06.2011","thumbnailUrl":"https://images-na.ssl-images-amazon.com/images/I/51aeT03KEdL._SX403_BO1,204,203,200_.jpg","authors":["Gojko Adzic"]},{"id":4,"title":"Flex 3 in Action","isbn":"1933988746","publisher":"Manning Publications","pageCount":576,"yearPublish":2009,"publishedDate":"02.02.2009","thumbnailUrl":"https://images-na.ssl-images-amazon.com/images/I/41A4gehsSFL.jpg","authors":["Tariq Ahmed","Jon Hirschi","Faisal Abid"]},{"id":5,"title":"Flex 4 in Action","isbn":"1935182420","publisher":"Manning Publications","pageCount":600,"yearPublish":2010,"publishedDate":"15.11.2010","thumbnailUrl":"https://images-na.ssl-images-amazon.com/images/I/41G1Rj57fJL._SX397_BO1,204,203,200_.jpg","authors":["Tariq Ahmed","Dan Orlando","John C. Bland II","Joel Hooks"]},{"id":6,"title":"Collective Intelligence in Action","isbn":"1933988312","publisher":"Manning Publications","pageCount":425,"yearPublish":2008,"publishedDate":"01.10.2008","thumbnailUrl":"https://images-na.ssl-images-amazon.com/images/I/51PTIN8Or9L._SX397_BO1,204,203,200_.jpg","authors":["Satnam Alag"]},{"id":7,"title":"Zend Framework in Action","isbn":"1933988320","publisher":"Manning Publications","pageCount":432,"yearPublish":2008,"publishedDate":"01.12.2008","thumbnailUrl":"https://images-na.ssl-images-amazon.com/images/I/51E3Of8ma2L._SX258_BO1,204,203,200_.jpg","authors":["Rob Allen","Nick Lo","Steven Brown"]},{"id":8,"title":"Flex on Java","isbn":"1933988797","publisher":"Manning Publications","pageCount":265,"yearPublish":2010,"publishedDate":"15.10.2010","thumbnailUrl":"https://images-na.ssl-images-amazon.com/images/I/51WBzTuWT2L._SX258_BO1,204,203,200_.jpg","authors":["Bernerd Allmon","Jeremy Anderson"]},{"id":9,"title":"Griffon in Action","isbn":"1935182234","publisher":"Manning Publications","pageCount":375,"yearPublish":2012,"publishedDate":"04.06.2012","thumbnailUrl":"https://images-na.ssl-images-amazon.com/images/I/51fOyhmPj0L._SX400_BO1,204,203,200_.jpg","authors":["Andres Almiray","Danno Ferrin","James Shingler"]},{"id":10,"title":"OSGi in Depth","isbn":"193518217X","publisher":"Manning Publications","pageCount":325,"yearPublish":2011,"publishedDate":"12.11.2011","thumbnailUrl":"https://images-na.ssl-images-amazon.com/images/I/41O9LpYrDNL._SX397_BO1,204,203,200_.jpg","authors":["Alexandre de Castro Alves"]},{"id":11,"title":"Flexible Rails","isbn":"1933988509","publisher":"Manning Publications","pageCount":592,"yearPublish":2008,"publishedDate":"01.01.2008","thumbnailUrl":"https://images-na.ssl-images-amazon.com/images/I/51ea8TCMSFL._SX395_BO1,204,203,200_.jpg","authors":["Peter Armstrong"]}]')},347:function(e,t,a){e.exports=a(577)},577:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(51),l=a.n(o),i=a(85),s=a(86),u=a(93),c=a(87),d=a(94),m=a(614),h=a(326),b=a(122),p=a(335),g=a(92),E=a(44),f="ADD_BOOK",k="DELETE_BOOK",v="EDIT_BOOK",w="SORT_BOOKS";function B(e){return{type:f,book:e}}function C(e){return{type:v,id:e}}function S(e){return{type:k,id:e}}function A(e){return{type:w,order:e}}var y=a(172),O=a(117),D=a(618),I=a(222),P=a(26),j=a(59),F=a(519);Object(j.addValidationRule)("isCorrectDate",function(e,t){var a=new Date("01.01.1800"),n=new Date,r=t?t.split("."):["01","01","1900"],o=Object(p.a)(r,3),l=o[0],i=o[1],s=o[2],u=new Date(i+"."+l+"."+s);if(u>=a&&u<=n||u.length>0)return!0}),Object(j.addValidationRule)("isCorrectYear",function(e,t){var a=(new Date).getFullYear(),n=parseInt(t);return!(t&&t.length>0)||n>=1800&&n<=a});var L=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,preview:"",authors:a.authorsPreSet(),formWasSubmitted:!1,formEditing:!1,newAuthAdded:!1},a.show=function(e){e.preventDefault(),a.setState({modal:!0})},a.close=function(){a.setState({modal:!1})},a.imagePreview=function(e){a.setState({preview:e.target.value})},a.authorsListChange=function(e,t){var n=t.value;a.setState({selectedAuthors:n,formWasSubmitted:!1})},a.addNewAuthor=function(e){var t=e.authorFirstName+" "+e.authorLastName,n=[{key:t,text:t,value:t}].concat(Object(b.a)(a.state.authors));if(a.state.formWasSubmitted&&!a.state.formEditing){var r=[];a.state.newAuthAdded&&(r=a.state.selectedAuthors);var o=r.concat(t);a.setState({modal:!1,authors:n,selectedAuthors:o,newAuthAdded:!0})}else{var l=(void 0===a.state.selectedAuthors?[]:a.state.selectedAuthors).concat(t);a.setState({modal:!1,authors:n,selectedAuthors:l})}},a.submitNewBook=function(e){if(a.state.formEditing)e.id=a.props.books.editedBook.id;else{var t=function(e){var t=0;return e.map(function(e){return e.id>t?t=e.id:null}),t}(a.props.books.data);e.id=t+1}var n=e;a.props.addNewBook(n),a.refs.bookForm.reset(),a.setState({formWasSubmitted:!0,preview:"",newAuthAdded:!1})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"authorsPreSet",value:function(){var e=this.props.books.data.map(function(e){return e.authors});return Object(b.a)(new Set(e.flat(1))).filter(function(e){return e.length>0}).map(function(e){return{key:e,text:e,value:e}})}},{key:"componentDidUpdate",value:function(e){e.books.editedBook!==this.props.books.editedBook&&(this.props.books.editedBook&&this.setState({selectedAuthors:this.props.books.editedBook.authors}),this.refs.bookForm.reset(this.props.books.editedBook),this.setState({formWasSubmitted:!0}))}},{key:"render",value:function(){console.log("State",this.state);var e=r.a.createElement(y.a,{basic:!0,color:"red",pointing:!0});return r.a.createElement(h.a.Row,null,r.a.createElement(h.a.Column,{mobile:16,largeScreen:10,table:10},r.a.createElement(P.Form,{onValidSubmit:this.submitNewBook,ref:"bookForm",className:"raised segment"},r.a.createElement(P.Form.Field,null,r.a.createElement(P.Form.Input,{required:!0,label:"Title",placeholder:"Title",name:"title",validations:{maxLength:30},validationErrors:{maxLength:"Max length 30 characters",isDefaultRequiredValue:"Required field"},errorLabel:e}),r.a.createElement(P.Form.Group,null,r.a.createElement(P.Form.Field,{required:!0,width:14},r.a.createElement("label",null,"List of authors"),r.a.createElement(P.Dropdown,{required:!0,placeholder:"Authors",name:"authors",fluid:!0,multiple:!0,search:!0,selection:!0,options:this.state.authors,validationErrors:{isDefaultRequiredValue:"Please add at least one author"},errorLabel:e,value:this.state.selectedAuthors,onChange:this.authorsListChange})),r.a.createElement(P.Form.Field,{width:2},r.a.createElement("label",null,"\xa0"),r.a.createElement(O.a,{color:"brown",icon:"plus",onClick:this.show}))),r.a.createElement(P.Form.Input,{label:"Publisher",placeholder:"Name",name:"publisher",validations:{maxLength:30},validationErrors:{maxLength:"Max length 30 characters"},errorLabel:e}),r.a.createElement(P.Form.Group,null,r.a.createElement(P.Form.Input,{required:!0,label:"Pages",placeholder:"Page count",name:"pageCount",width:5,validations:{matchRegexp:F("^(?:[1-9][0-9]{0,3}?|10000)$")},validationErrors:{matchRegexp:"Wrong format. Available from 0 to 10000",isDefaultRequiredValue:"Required field"},errorLabel:e}),r.a.createElement(P.Form.Input,{label:"Year",placeholder:"For example, 2003",name:"yearPublish",width:5,validations:"isCorrectYear",validationError:"Wrong date format.",errorLabel:e}),r.a.createElement(P.Form.Input,{label:"Published date",placeholder:"Format dd.mm.yyyy",name:"publishedDate",width:6,validations:"isCorrectDate",validationError:"Wrong date format.",errorLabel:e})),r.a.createElement(P.Form.Input,{label:"ISBN",placeholder:"ISBN",name:"isbn",validations:{matchRegexp:F("^(?:ISBN(?:-1[03])?:? )?(?=[0-9X]{10}$|(?=(?:[0-9]+[- ]){3})[- 0-9X]{13}$|97[89][0-9]{10}$|(?=(?:[0-9]+[- ]){4})[- 0-9]{17}$)(?:97[89][- ]?)?[0-9]{1,5}[- ]?[0-9]+[- ]?[0-9]+[- ]?[0-9X]$")},validationErrors:{matchRegexp:"Wrong ISBN format."},errorLabel:e}),r.a.createElement(P.Form.Input,{label:"Image link",placeholder:"URL",onChange:this.imagePreview,name:"thumbnailUrl"})),r.a.createElement(O.a,{type:"submit",color:"brown"},"Add")),r.a.createElement(D.a,{open:this.state.modal,onClose:this.close,centered:!1,size:"mini"},r.a.createElement(D.a.Header,null,"Add new author"),r.a.createElement(D.a.Content,null,r.a.createElement(P.Form,{onValidSubmit:this.addNewAuthor},r.a.createElement(P.Form.Input,{required:!0,label:"First name",name:"authorFirstName",validations:{maxLength:20},validationErrors:{maxLength:"Max length 20 characters",isDefaultRequiredValue:"Required field"},errorLabel:e}),r.a.createElement(P.Form.Input,{required:!0,label:"Last name",name:"authorLastName",validations:{maxLength:20},validationErrors:{maxLength:"Max length 20 characters",isDefaultRequiredValue:"Required field"},errorLabel:e}),r.a.createElement(O.a,{type:"submit",color:"brown"},"Add"))))),r.a.createElement(h.a.Column,{width:6,only:"large screen"},r.a.createElement("br",null),r.a.createElement(I.a,{fluid:!0,bordered:!0,rounded:!0,onError:function(e){e.target.src="./assets/imgs/default.png"},src:this.props.books.editedBook&&void 0!==this.props.books.editedBook.thumbnailUrl?this.props.books.editedBook.thumbnailUrl:this.state.preview?this.state.preview:"./assets/imgs/default.png"})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=!!e.books.editedBook;return a!==t.formEditing?{formEditing:a}:null}}]),t}(n.Component);var _=Object(g.b)(function(e){return{books:e.books}},function(e){return Object(E.b)({addNewBook:B},e)})(L),x=a(315),R=a(54),N=a(615),q=a(168),T=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,deletingBookID:"",showEdit:!0},a.show=function(e){return a.setState({open:!0,deletingBookID:e})},a.close=function(){return a.setState({open:!1,deletingBookID:""})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"deleteBookHandler",value:function(e){this.props.deleteBook(e),this.setState({open:!1})}},{key:"editBookHandler",value:function(e){this.props.editBook(e),this.setState({showEdit:!1}),window.scrollTo(0,0)}},{key:"componentDidUpdate",value:function(e){this.props.books.data.length-e.books.data.length===1&&this.setState({showEdit:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a.Row,null,r.a.createElement(h.a.Column,{width:16},r.a.createElement(x.a,{text:!0},r.a.createElement(x.a.Item,{header:!0},"SORT"),r.a.createElement(x.a.Item,null,"|"),r.a.createElement(x.a.Item,null,r.a.createElement(R.a,{name:"angle up",onClick:function(){return e.props.sortBooks("TitleASC")}})),r.a.createElement(x.a.Item,{name:"Title",onClick:this.handleItemClick}),r.a.createElement(x.a.Item,null,r.a.createElement(R.a,{name:"angle down",onClick:function(){return e.props.sortBooks("TitleDESC")}})),r.a.createElement(x.a.Item,null,"|"),r.a.createElement(x.a.Item,null,r.a.createElement(R.a,{name:"angle up",onClick:function(){return e.props.sortBooks("YearASC")}})),r.a.createElement(x.a.Item,{name:"Year",onClick:this.handleItemClick}),r.a.createElement(x.a.Item,null,r.a.createElement(R.a,{name:"angle down",onClick:function(){return e.props.sortBooks("YearDESC")}})),r.a.createElement(x.a.Item,null,"|"))),r.a.createElement(h.a.Column,{width:16},r.a.createElement(N.a,null)),r.a.createElement(h.a.Column,{width:16},r.a.createElement(q.a.Group,{stackable:!0,itemsPerRow:3},this.props.books.data.map(function(t){return r.a.createElement(q.a,{key:t.id},r.a.createElement(I.a,{src:t.thumbnailUrl?t.thumbnailUrl:"./assets/imgs/default.png",wrapped:!0,ui:!1}),r.a.createElement(q.a.Content,null,r.a.createElement(q.a.Header,null,t.title),r.a.createElement(q.a.Meta,null,t.publisher,r.a.createElement("br",null),t.yearPublish)),r.a.createElement(q.a.Content,null,r.a.createElement(q.a.Description,null,t.authors.map(function(e){return r.a.createElement(y.a,{key:e},e)})),r.a.createElement(q.a.Description,null,r.a.createElement("br",null),t.publishedDate?r.a.createElement("p",null,r.a.createElement("b",null,"Date: ")," ",t.publishedDate):null,r.a.createElement("p",null,r.a.createElement("b",null,"Pages: ")," ",t.pageCount),t.isbn?r.a.createElement("p",null,r.a.createElement("b",null,"ISBN: ")," ",t.isbn):null)),e.state.showEdit?r.a.createElement(q.a.Content,{extra:!0},r.a.createElement(O.a,{basic:!0,icon:!0,color:"green",onClick:function(){return e.editBookHandler(t.id)}},r.a.createElement(R.a,{name:"pencil"})),r.a.createElement(O.a,{basic:!0,icon:!0,color:"red",onClick:function(){return e.show(t.id)}},r.a.createElement(R.a,{name:"close"}))):null)}))),r.a.createElement(D.a,{size:"mini",open:this.state.open,onClose:this.close},r.a.createElement(D.a.Header,null,"Delete book"),r.a.createElement(D.a.Content,null,r.a.createElement("p",null,"Are you sure you want to delete this book?")),r.a.createElement(D.a.Actions,null,r.a.createElement(O.a,{negative:!0,onClick:this.close},"No"),r.a.createElement(O.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Yes",onClick:function(){return e.deleteBookHandler(e.state.deletingBookID)}}))))}}]),t}(n.Component);var U=Object(g.b)(function(e){return{books:e.books}},function(e){return Object(E.b)({deleteBook:S,editBook:C,sortBooks:A},e)})(T),M=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(h.a,{padded:!0,className:"segment"},r.a.createElement(_,null),r.a.createElement(U,null)))}}]),t}(n.Component),z=a(225),X=a(334);var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0,a=e.data?e.data:e,n=null;switch(t.type){case f:return{data:a=[t.book].concat(Object(b.a)(e.data)),editedBook:n};case v:return{data:a=e.data.filter(function(e){return e.id!==t.id}),editedBook:n=e.data.filter(function(e){return e.id===t.id})[0]};case k:return{data:a=e.data.filter(function(e){return e.id!==t.id}),editedBook:n};case w:switch(t.order){case"TitleASC":return{data:a=e.data.slice().sort(function(e,t){return e.title<t.title?-1:e.title>t.title?1:0}),editedBook:n};case"TitleDESC":return{data:a=e.data.slice().sort(function(e,t){return e.title>t.title?-1:e.title<t.title?1:0}),editedBook:n};case"YearASC":return{data:a=e.data.slice().sort(function(e,t){return e.yearPublish-t.yearPublish}),editedBook:n};case"YearDESC":return{data:a=e.data.slice().sort(function(e,t){return t.yearPublish-e.yearPublish}),editedBook:n};default:return{data:a,editedBook:n}}default:return{data:a,editedBook:n}}},J=Object(E.c)({books:W}),Y=Object(E.a)(Object(z.save)())(E.d)(J,Object(z.load)());l.a.render(r.a.createElement(g.a,{store:Y},r.a.createElement(M,null)),document.getElementById("root"))}},[[347,1,2]]]);
//# sourceMappingURL=main.550192b7.chunk.js.map